# Повязки Pepeland

В этом разделе вы найдете все что нужно знать о регистрации и работе на сайте, а так же о создании повязок.

## Мастерская
Мастерская – это главное место, где вы можете найти то, что ищите. В мастерской отображаются все повязки, которые были одобрены администрацией и имеющие публичный доступ. Доступ к мастерской имеют все без исключения пользователи, как зарегистрированные, так и нет.

## Регистрация на сайте
Регистрация разрешена только пользователям, являющимися членами Discord сервера PWGood, а так же имеющие определенные роли. При регистрации сайт сохраняет ваш никнейм с учётной записи Discord. Дальнейшее его изменение возможно только через администрацию сайта.
> [!NOTE]
> Если ваш никнейм будет содержать слова и выражения, запрещенные правилами сайта, администрация может принудительно заменить его на другой. Последующая смена будет доступна так же через администрацию.

## Интеграции
Сайт позволяет искать скины через встроенную базу Minecraft ников, которые постоянно пополняются автоматически при поиске нового никнейма. Вы можете привязать свой Minecraft аккаунт к учётной записи PPLBandage через сервис [mc-oauth](https://github.com/Andcool-Systems/MC-OAuth_server).  
Для привязки вам нужно зайти на Minecraft сервер <u>oauth.pplbandage.ru</u> для версии, начиная с 1.8 и получить там 6-значный код, который нужно будет ввести на странице /me/settings.

> [!TIP]
> Сервис `mc-oauth` был разработан специально для этого сайта. Он полностью повторяет систему авторизации оригинальных серверов Minecraft и получает доступ только к никнейму и UUID.

После привязки Minecraft аккаунта к аккаунту PPLBandage, вы сможете обновлять кэш скинов когда угодно, включать/выключать отображение вашего ника в поиске скинов в редакторе, а так же включить автоматическую загрузку скина в редакторе.

## Публикация повязок
> [!TIP]
> Подробнее о создании повязок читайте на странице /tutorials/bandage

Публикация повязок доступна только зарегистрированным пользователям.  
Все повязки имеют информацию, содержащую название, описание и категории.  
#### Ограничения информации о повязке:
- Название: не более 50 символов
- Описание: не более 300 символов
- Категории: без ограничений
  
> [!NOTE]
> После создания повязки, изменить её внешний вид будет невозможно.

При создании или изменении повязки описание можно не указывать.  
После создания повязки она будет автоматически отправлена на модерацию. Модерация проходит от 24 до 48 часов.

## Модерация повязок
Все повязки после создания должны пройти обязательную модерацию. До тех пор повязка не будет доступна из мастерской и видна по ссылке только вам. Во время модерации вы можете так же редактировать информацию о повязке, но после подтверждения повязки модерацией, изменить название и описание будет возможно только через администрацию сайта.  

В ходе модерации ваша повязка так же может быть отклонена. Это означает, что информация о ней или изображение повязки не соответствует правилам сайта. При отклонении вашей работы, вы можете узнать причины у администрации сайта.  
**Отклонение повязки не означает её удаление.** При отклонении повязки вы сможете повторно запросить ее модерацию, устранив причину отказа.

> [!NOTE]
> Вы не можете иметь одновременно более 5 повязок на проверке. Общих ограничений по количеству повязок нет.


## Категории
Любая повязка может иметь категории, это помогает пользователям легче искать требуемые повязки. Любая повязка может иметь неограниченное количество категорий. Категории, установленные на вашей работе должны точно описывать вашу работу. Не стоит ими злоупотреблять.
> [!WARNING]
> Злоупотребление категориями может привести к блокировке повязки.

Некоторые категории несут больше чем информативный характер. К примеру, категория `colorable` показывает, что эта повязка имеет возможность окрашивания, и на странице повязки будет отображён соответствующий элемент для выбора цвета.


# Создание повязки

На этой странице описан весь процесс создания повязки со всеми особенностями и нюансами.

## Строение
Перед тем как начать создание повязки, нужно рассказать о её строении:
- Повязка состоит из двух слоёв, которые соединены вместе друг под другом.
- Ширина **любой** повязки должна быть 16 пикселей.
- Высота может быть любой в диапазоне от 1 до 12 пикселей включительно.
- Так как файл с повязкой состоит из одного изображения (1-й пункт), диапазон высоты итогового изображения составляет от 2 до 24 пикселей включительно, а так же быть чётным.

## Алгоритм наложения
Также чтобы правильно создать повязку, следует понимать, что с ней будет делать сайт при наложении.
1. Разбиение одного файла на первый и второй слой:  
    Входной файл делится пополам по высоте (именно поэтому он должен быть чётной высоты). Верхняя половина идёт на второй слой, а нижняя на первый.
2. Адаптация под выбранную часть тела, тип рук:  
    Если выбран узкий тип скина, то движок повязок обрезает повязку слева и справа по одному пикселю. Учитывайте это при создании повязки!  
    Подробно рассказывать о адаптации повязки под правую руку и ногу знать не обязательно, нужно лишь знать то, что повязка будет выглядеть одинаково на левой и правой руке, единственное изменение, которая она претерпит – это "поворот" на 180° вокруг оси руки без отражения.  
3. Окрашивание повязки в заданный цвет. Об этом подробнее в /tutorials/colorable/
4. Финальное наложение на скин. Диапазон позиций вычисляется как 12-\*высота повязки\*.

## Сборка повязки
После того как вы нарисовали повязку вам следует собрать её в понятный для сайта формат.

> [!TIP]
> Если вы рисуете повязку в программах по типу Blockbench или подобных, удобнее всего будет это делать на левой руке и со стандартной моделькой скина. В таком случае будет легче всего собрать повязку.

Для упрощения понимания я разделил сборку повязки на этапы:
1. Определение размеров повязки.  
    Так как ширина повязки всегда должна быть 16 пикселей, определять нужно высоту. Если у вас слои имеют различную высоту, то нужно брать **максимальную** высоту слоя. Учтите, что определенные границы первого и второго слоя должны начинаться и заканчиваться на одной координате Y.  Пример:  
    ![ex](/public/static/tutorials/tutorial_1.png)
2. Разбиение на слои.  
   После определения размеров повязки, нужно разделить повязку на слои.  
   Создайте новый `.png` файл шириной в 16 пикселей и высотой, вдвое большей высоте повязки. Расположите второй слой повязки в верхней половине нового файла, а первый – в нижней.

# Окрашиваемые повязки
Тут вы найдёте всё что нужно знать о процессе окрашивания повязок и как сделать это правильно.

## Создание окрашиваемой повязки
Окрашиваемые повязки почти ничем не отличаются от обычных, единственное отличие это то, что они проходят дополнительный этап обработки на сайте.  

Для начала разберёмся с процессом окрашивания. Движок повязок проходит по каждому пикселю в исходном изображении повязки и проверяет его цвет. Если все цветовые каналы равны, то есть `r = g = b`, то движок заливает этот пиксель заданным цветом.

> [!NOTE]
> Итоговый цвет после заливки определяется формулой `r / 255 * new_r`, где `r` – это исходное значение канала цвета, а `new_r` – это значение канала заливающего цвета. Эта формула применяется и к остальным каналам.

Как вы уже поняли, движок повязок заливает только пиксели оттенков серого и не умеет накладывать цвет на уже существующий.

> [!TIP]
> Если вам нужно сделать какой-либо пиксель незаливаемым, вы можете изменить значение одного из каналов цвета в этом пикселе на 1 и движок повязок пропустит его на этапе заливки.

## Публикация окрашиваемой повязки
Публикация окрашиваемой повязки ничем не отличается от публикации обычной повязки. Но на моменте выбора категорий вам нужно выбрать категорию 'окрашиваемые'. Таким образом вы отметите свою работу как окрашиваемую и на странице повязки в мастерской будет отображён соответствующий элемент выбора цвета.